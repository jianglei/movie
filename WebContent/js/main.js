/*pub-1|2012-11-29 14:10:15*/KSLITE.declare("inf-main",["inf-chk","inf-request","inf-fix"],function(B,A){A.run=function(F){var D=B("inf-request");var C=B("inf-chk").Def;var E=B("inf-fix").fix(F);C(E,function(){D.getRequest(E,function(G){KSLITE.provide(["inf-distype-"+G.t.distype],function(){B("inf-distype-"+G.t.distype).display(G)})})})}});KSLITE.declare("inf-cur",[],function(D,B){var G=window,F=document,C={},A={},E={};C.ali=["taobao.com","alimama.com","alibaba.com","alipay.com","alisoft.com","linezing.com","tanx.com","mmstat.com","etao.com"];C.kws=["wd","p","q","keyword","kw","w","key","word","query","name"];C.zmax=6;C.alimama="http://z.alimama.com/alimama.php";C.alimamal="http://z.alimama.com/alimamal.php";C.ecpm="http://t.alimama.com/alimama.php";C.ecpml="http://t.alimama.com/alimamal.php";C.tl={maxl:10,maxc:10,tc:[4,8,12],ts:[12,14,16],zmax:20,tc1:"tc1"};C.schmax=10;C.tk={tksc:"tksc1"};C.richcnt="0-0-0";C.rseed=4973;C.limit=0.9;C.sc="sc1";C.mc="mc1";E.data={};E.units=[];E.p1=[];E.p2=[];E.ali=(function(){var I,J=F.domain.split("."),K=C.ali,H;if(J.length>1){H="@"+J[J.length-2]+"."+J[J.length-1];if(("@"+K.join("@")).indexOf(H)>-1){return true}}return false})();E.bof=(function(){try{var H=top.document.location;return false}catch(I){return true}})();E.frm=(function(){var H=true;try{H=(self.location!=top.location)}catch(I){}return H})();E.cw=window;E.mw=window;E.cd=E.cw.document;E.md=E.mw.document;E.u=function(){if(E.bof&&E.md.referrer){return E.md.referrer}if(E.frm){try{return top.document.location.href}catch(H){return E.md.referrer}}return E.md.location.href}();E.r=(function(){var I="";try{I=top.document.referrer}catch(H){}if(I===null){I=""}return I})();E.dx=function(){return E.data[C.sc]};A.one=function(H){return F.getElementById(H)};A.after=function(I,N){var H,L,K,M,J=0;if(!I||!N){return }H=F.createElement("div");H.innerHTML=N;L=I.parentNode;K=I.nextSibling;while(H.childNodes.length!==0&&J<5){M=H.childNodes[0];if(K){L.insertBefore(M,K)}else{L.appendChild(M)}J++}H=null};A.pos=function(H,O){function L(R){return R.offsetParent?R.offsetLeft+L(R.offsetParent):R.offsetLeft}function J(R){return R.offsetParent?R.offsetTop+J(R.offsetParent):R.offsetTop}var Q=A.one(H),K=L(Q),I=J(Q),M=G,N=0;if(O){try{if(M.parent.window&&typeof M.parent.window!="undefined"&&M!=M.parent){while(M.location!=window.top.location&&N<3){K+=L.call(M.parent,M.frameElement);I+=J.call(M.parent,M.frameElement);M=M.parent.window;N++}}}catch(P){}}return[K,I]};C.zone={};C.zone._m="a";C.zone._ac=document.getElementsByTagName("body")[0];A.put=function(I){var J=C.zone._m,H=C.zone._ac;if(J=="a"){A.after(H,I)}else{if(J=="c"){H.innerHTML=I}else{F.write(I)}}};A.bencodeUtf8=function(I){var J="";for(var H=0;H<I.length;H++){var K=I.charCodeAt(H);if(K<128){if(K==46||K==40||K==41||(K>47&&K<58)||(K>64&&K<91)||(K>96&&K<123)){J+=I.charAt(H)}else{J+=bhex(K)}}else{if(127<K&&K<2048){J+=bhex((K>>6)|192);J+=bhex((K&63)|128)}else{if(2047<K&&K<65536){J+=bhex((K>>12)|224);J+=bhex(((K>>6)&63)|128);J+=bhex((K&63)|128)}else{if(65535<K&&K<2097152){J+=bhex((K>>18)|240);J+=bhex(((K>>12)&63)|128);J+=bhex(((K>>6)&63)|128);J+=bhex((K&63)|128)}else{if(2097151<K&&K<67108864){J+=bhex((K>>24)|248);J+=bhex(((K>>18)&63)|128);J+=bhex(((K>>12)&63)|128);J+=bhex(((K>>6)&63)|128);J+=bhex((K&63)|128)}else{if(67108863<K&&K<2147483648){J+=bhex((K>>30)|252);J+=bhex(((K>>24)&63)|128);J+=bhex(((K>>18)&63)|128);J+=bhex(((K>>12)&63)|128);J+=bhex(((K>>6)&63)|128);J+=bhex((K&63)|128)}}}}}}}return J};A.bencodeUrl=function(H){if(typeof encodeURIComponent=="function"){return encodeURIComponent(H.toString())}else{return A.bencodeUtf8(H.toString())}};A.p2s=function(N,L,H){if(!H){H={}}var O=function(U,T){var W=0;var Q=/[^\x00-\xff]/;for(var S=0;S<U.length;S++){var R=U.charAt(S);var V=1;if(Q.test(R)){V=2}W=W+V;if(W>T*2){return U.substr(0,S)}}return U};var M=[];for(var P in N){var J=N[P];var I=P.split("_");if(I.length<2){break}var K=I[1];if(K=="i"){if(/[\D]/.test(J)){J=0}M.push(L+"_"+I[0]+"="+J)}else{if(K=="c"){if(J.indexOf("#")===0){J=J.substr(1)}if(/[^0-9a-fA-F]/.test(J)||J.toString().length!=6){J="FFFFFF"}M.push(L+"_"+I[0]+"="+J)}else{if(K=="s"){if(H[I[0]]){J=O(J,H[I[0]])}else{J=O(J,10)}M.push(L+"_"+I[0]+"="+A.bencodeUrl(J))}}}}return M};A.baddUnit=function(K){var I=new Date();var J=I.getTime();var H={};H.w=window;H.pid=K.p.pid;H.t=J;H.tp=K.p.type;H.sz=K.p.sizecode;E.units.push(H)};A.baddCount=function(K,J){var H=0;for(var I=0;I<E.units.length;I++){if(E.units[I].pid==J.p.pid){H+=1}if(H>1){return }}if(!E.data[K]){E.data[K]=1}else{E.data[K]++}};B.C=C;B.U=A;B.R=E});KSLITE.declare("inf-antifraud",["inf-cur"],function(K,V){var E=K("inf-cur");var G=window,W=document,P={},O=E.C,B=O.zone,F=E.U,I=E.R,J=Math;function L(){var M="",C="",U,X,a,b,Z=location,R="";function Y(e,g){var f="",c=1,d;c=Math.floor(e.length/g);if(c==1){f=e.substr(0,g)}else{for(d=0;d<g;d++){f+=e.substr(d*c,1)}}return f}if(I.ali){U=(" "+W.cookie).split(";");for(X=0;X<U.length;X++){if(U[X].indexOf(" cna=")===0){C=U[X].substr(5,24);break}}}if(C===""){cu=(Z.search.length>9)?Z.search:((Z.pathname.length>9)?Z.pathname:Z.href).substr(1);U=document.cookie.split(";");for(X=0;X<U.length;X++){if(U[X].split("=").length>1){R+=U[X].split("=")[1]}}if(R.length<16){R+="0123456789abcdef"}C=Y(cu,8)+Y(R,16)}for(X=1;X<=32;X++){a=J.floor(J.random()*16);if(C&&X<=C.length){b=C.charCodeAt(X-1);a=(a+b)%16}M+=a.toString(16)}return"cg="+M}function Q(){var C=J.floor(J.random()*10000)+10001;try{if(I.sid){C=I.sid}else{C=C-10001;I.sid=C}}catch(M){}return"ac="+C}function H(){var X=0,a=16,Y=0,M,C,R,b,U,Z=O[0]||4973;for(R=1;R<=a;R++){M=J.random();C=J.random();if((J.pow(M,2)+J.pow(C,2))<=1){X++}if(R<=12){Y=Y+M}}b="pr"+String.fromCharCode(97+X);U=(J.round(Y*Z)|((I.md.body?I.md.body.clientWidth:0)<<16));return b+"="+U+"&cas="+b}function N(){var M,C=1,R=-1;if(I.md){M=I.md.body;C=M.clientHeight;R=M.clientWidth}return"cbh="+C+"&cbw="+R}function A(){var C,X,U="mm_ti_",M="<img name='"+U+"' id='"+U+"' style='width:0px;height:0px;padding:0px;margin:0px;border:0px;vertical-align:baseline;' border=0 />";F.put(M);X=F.pos(U,true);try{C=F.one(U);if(C){C.parentNode.removeChild(C)}}catch(R){}return"sx="+X[0]+"&sy="+X[1]}function D(){var R=G.screen,C=0,Z=0,M=0,X=0,Y=0;try{C=R.width;Z=R.height;M=R.availHeight;X=R.availWidth;Y=R.colorDepth}catch(U){}return"re="+C+"x"+Z+"&cah="+M+"&caw="+X+"&ccd="+Y}function T(){var C="-1",Y=navigator,R,M;if(Y.plugins&&Y.plugins.length){for(R=0;R<Y.plugins.length;R++){if(Y.plugins[R].name.indexOf("Shockwave Flash")!=-1){C=Y.plugins[R].description.split("Shockwave Flash ")[1];break}}}else{if(window.ActiveXObject){for(M=10;M>=2;M--){try{var U=new Function("return new ActiveXObject('ShockwaveFlash.ShockwaveFlash."+M+"');");if(U){C=M+".0";break}}catch(X){}}}}if(C!="-1"){C=C.substring(0,C.indexOf(".")+2)}return"cf="+C}function S(){var C=[],M=navigator;C.push("ctz="+(-((new Date()).getTimezoneOffset()/60)));C.push("chl="+history.length);C.push("cja="+(M.javaEnabled()?"1":"0"));C.push("cpl="+(M.plugins?M.plugins.length:0));C.push("cmm="+(M.mimeTypes?M.mimeTypes.length:0));C.push(T());return C.join("&")}P.get=function(){if(!P.f){P.f=[D(),S()].join("&")}return[P.f,L(),Q(),H(),N(),A()]};V.Def=P});KSLITE.declare("inf-pageinfo",["inf-cur"],function(M,X){var B=M("inf-cur");var G=window,Y=document,J={},S=B.C,A=S.zone,F=B.U,I=B.R,H=encodeURIComponent;function K(){var R="0",Z="alimamapid=",P=navigator.userAgent.toLowerCase(),C;try{C=top.location.href}catch(U){C=I.md.referrer}if(P.indexOf("fox/ss")>-1&&C.indexOf(Z)>-1&&C.substr(C.indexOf(Z)+Z.length)==S.zone.i){R="1"}return"iss="+R}function O(){var R=location.host,P,C,U;if(-1<R.lastIndexOf("taobao.com")&&10===R.length-R.lastIndexOf("taobao.com")){P=Y.cookie;if(P){P=(" "+P).split(";");for(C=0;C<P.length;C++){U=P[C].split("=");if(U[0].indexOf(" tracknick")===0){return U[1]?"uid="+U[1]:""}}}}return""}function T(){var C=I.dx();return"dx="+(C?C:"")}function N(){return"u="+H(I.u)}function V(){return"r="+H(I.r)}function W(P){var U=S.kws,R,Z,C;if(P){for(R=0;R<U.length;R++){Z=new RegExp("[^1-9a-zA-Z]"+U[R]+"=([^&]*)");C=P.match(Z);if(C){Z=new RegExp("^[0-9]*$");if(C[1].match(Z)===null){return C[1]}}}}return""}function L(){var C=W(I.u);if(C===""&&I.r){C=W(I.r)}return"k="+C}function Q(){var C="";try{C=I.md.title}catch(P){}return"tt="+H(C)}function E(U){var R="-1",P=1,C=1;if(I.frm){if(G.innerHeight){P=G.innerWidth;C=G.innerHeight}else{if(Y.documentElement&&Y.documentElement.clientHeight){P=Y.documentElement.clientWidth;C=Y.documentElement.clientHeight}else{if(Y.body){P=Y.body.clientWidth;C=Y.body.clientHeight}}}if(C>2*U.p.height||P>2*U.p.width){R=H(G.location.href)}}return"fu="+R}function D(){var P="",C="",U,Z,d,e,c=location,R="",a=Math;function b(h,k){var j="",f=1,g;f=Math.floor(h.length/k);if(f==1){j=h.substr(0,k)}else{for(g=0;g<k;g++){j+=h.substr(g*f,1)}}return j}if(I.ali){U=(" "+Y.cookie).split(";");for(Z=0;Z<U.length;Z++){if(U[Z].indexOf(" cna=")===0){C=U[Z].substr(5,24);break}}}if(C===""){cu=(c.search.length>9)?c.search:((c.pathname.length>9)?c.pathname:c.href).substr(1);U=document.cookie.split(";");for(Z=0;Z<U.length;Z++){if(U[Z].split("=").length>1){R+=U[Z].split("=")[1]}}if(R.length<16){R+="abcdef0123456789"}C=b(cu,8)+b(R,16)}for(Z=1;Z<=32;Z++){d=a.floor(a.random()*16);if(C&&Z<=C.length){e=C.charCodeAt(Z-1);d=(d+e)%16}P+=d.toString(16)}return"pageid="+P}J.get=function(P){var C;if(!J.f){J.f=[K(),N(),L(),Q(),V(),E(P),D()].join("&");C=O();if(C){J.f=C+"&"+J.f}}return[T(),J.f]};X.Def=J});KSLITE.declare("inf-request",["inf-antifraud","inf-pageinfo","inf-cur"],function(B,A){A.getRequest=function(H,F){var I=B("inf-cur");I.R.p1=B("inf-antifraud").Def.get();I.R.p2=I.R.p2.length?I.R.p2:B("inf-pageinfo").Def.get(H);var G=[];function E(L,K,J){if((!L||L==="")||(!K||K==="")){return }else{J.push(L+"="+K)}}KSLITE.provide(["inf-type-"+H.p.type],function(){G=B("inf-type-"+H.p.type).getP(H)});var C=[];E("i",H.p.pid,C);E("w",H.p.width,C);E("h",H.p.height,C);E("sz",H.p.sizecode,C);if(G.length){C.push(G.join("&"))}C.push(I.R.p1.join("&"));E("rp",H.p.referpid,C);E("refpos",H.p.refpos,C);E("t",H.p.type,C);E("tc",H.p.titlecolor,C);E("dc",H.p.descolor,C);E("bgc",H.p.bgcolor,C);E("bdc",H.p.bordercolor,C);E("lc",H.p.linkcolor,C);E("bmc",H.p.bottomcolor,C);E("as",H.p.anglesize,C);E("bgp",H.p.bgpic,C);E("ic",H.p.icon,C);E("tlul",H.p.underline,C);E("tlfs",H.p.fontsize,C);var D=2;switch(H.t.distype){case"float_win":E("distype",1,C);break;case"float_couplet":if(H.t.disfloat=="left"){D=3}if(H.t.disfloat=="right"){D=4}E("distype",D,C);break}if(typeof (H.p.custom)=="string"){E("ctm",I.U.bencodeUrl(H.p.custom),C)}E("pf",H.p.pf||"1",C);if(typeof (H.p.p4p_kw)=="string"){E("p4p_kw",I.U.bencodeUrl(H.p.p4p_kw),C)}if(typeof (H.p.p4p_ai)=="string"){if(H.p.p4p_ai=="1"||H.p.p4p_ai=="2"||H.p.p4p_ai=="3"){E("p4p_ai",H.p.p4p_ai,C)}}else{E("p4p_ai","1",C)}C.push(I.R.p2.join("&"));H.url+=C.join("&");F(H)}});KSLITE.declare("inf-chk",["inf-cur"],function(B,A){A.Def=function(E,D){var F=B("inf-cur");E.url=F.C.alimama+"?";if(E.p.type&&(E.p.type=="i")){E.url=F.C.ecpm+"?"}(function(){if(typeof E.p.height=="undefined"){E.p.height=0}if(typeof E.p.width=="undefined"){E.p.width=0}})();function C(J){var I=true;var G=0;for(var H=0;H<F.R.units.length;H++){if(F.R.units[H].pid==J.p.pid){G+=1}if(G>1){I=false}}return I}KSLITE.provide(["inf-type-"+E.p.type],function(){var G=B("inf-type-"+E.p.type);F.U.baddUnit(E);G.prerun(E);if(C(E)&&G.chk(E)){D()}})}});KSLITE.declare("inf-fix",[],function(B,A){A.fix=function(D){var C={};C.p=D;C.url="";C.adiframe={};C.adiframe.id="tanx-a-"+C.p.pid;C.adiframe.css="";C.t={};C.btl={l:1,c:1,s:12,n:4};C.p.type=C.p.type?C.p.type:2;if(C.p.type=="j"){C.p.limit=0.1}if(C.p.type=="a"||C.p.type=="b"||C.p.type=="j"){C.p.type=2}C.t.distype="default";C.t.disfloat="double";if(C.p.type==2&&(C.p.displaytype=="a"||C.p.displaytype=="c")){C.t.distype="float_win"}if(C.p.type==2&&C.p.displaytype=="b"){C.t.distype="float_couplet"}if(C.p.type==2&&C.p.displaytype=="b-left"){C.t.distype="float_couplet";C.t.disfloat="left"}if(C.p.type==2&&C.p.displaytype=="b-right"){C.t.distype="float_couplet";C.t.disfloat="right"}if(C.p.type=="i"){C.t.distype="script"}C.bcl={};C.p.refpos=(function(E){var I="";var H=("&"+location.search.substring(1)).split("&refpos=");if(H[1]){var G=H[1].split("&")[0].split(",");if(G[1]){var F=G[1]}if(F&&F!="null"&&(F=="b"||F=="e")){I=F}}if(I===""){if(E.type=="2"||E.type=="j"){if(E.displaytype=="a"||E.displaytype=="c"){I="b"}else{if(E.displaytype=="b"){I="e"}else{I="a"}}}else{I="null"}}return","+I+",null"})(C.p);return C}});KSLITE.declare("inf-type-2",["inf-cur"],function(B,A){var C=B("inf-cur");A.chk=function(E){var D=true;if(C.R.data[C.C.sc]>C.C.zmax){D=false}return D};A.prerun=function(I){if(C.C.alimama!="http://z.alimama.com/docom.php"){var H=I.p.limit||C.C.limit;var K={"11":[760,90],"12":[468,60],"14":[728,90],"15":[950,90],"16":[658,60],"13":[250,60],"21":[120,600],"22":[120,240],"23":[160,600],"31":[180,250],"32":[250,300],"33":[360,190],"34":[250,250],"35":[200,200],"36":[336,280],"37":[300,250],"38":[290,200]};var J=I.p.width;var F=I.p.height;var E=I.p.sizecode;if(K[E]){var D=K[E][0];var G=K[E][1];if(D*H>J){I.p.pf="0";I.p.width=Math.round(D*H)}if(G*H>F){I.p.pf="0";I.p.height=Math.round(G*H)}}}C.U.baddCount(C.C.sc,I)};A.getP=function(D){return[]}});KSLITE.declare("inf-type-i",["inf-cur"],function(C,B){function A(F){return true}function D(F){return }function E(F){return[]}B.chk=A;B.prerun=D;B.getP=E});KSLITE.declare("inf-distype-default",["inf-distype-iframe"],function(B,A){A.display=function(C){B("inf-distype-iframe").display(C)}});KSLITE.declare("inf-distype-iframe",[],function(B,A){A.display=function(E){if(typeof E.p.underfilter=="number"){E.adiframe.css+="position:relative;width:"+E.p.width+"px; height:"+E.p.height+"px;"}else{if(E.p.type=="f"&&E.p.width===0){E.adiframe.css+="width:100%; height:"+E.p.height+"px;"}else{E.adiframe.css+="width:"+E.p.width+"px; height:"+E.p.height+"px; "}}E.adiframe.css+="border:0;";var C=0;D();function D(){var F=document.getElementById(E.adiframe.id);if(!F&&C<5){C++;setTimeout(function(){D()},C*500);return }if(!F){return }F.marginWidth=0;F.marginHeight=0;F.scrolling="no";F.src=E.url;F.frameBorder=0;F.style.cssText=E.adiframe.css;F=document.getElementById(E.adiframe.id+"_clone");if(F){F.marginWidth=0;F.marginHeight=0;F.scrolling="no";F.src=E.url;F.frameBorder=0;F.style.cssText=E.adiframe.css}F=undefined}}});KSLITE.declare("inf-distype-script",[],function(B,A){A.display=function(E){var D=document.createElement("script"),F=document,C=F.getElementsByTagName("head")[0];D.charset="gbk";D.async=true;D.src=E.url;C.insertBefore(D,C.firstChild)}});